@model IEnumerable<Task3_V7.Data.Book>
@{
    Layout = null;
    int? minYear = ViewBag.MinYear as int?;
    string value = minYear.HasValue ? minYear.Value.ToString() : "";
}
<!doctype html>
<html>
<head><meta charset="utf-8"><title>Books by year</title></head>
<body>
    <p><a href="/Queries">Back</a></p>
    <h1>Books by year</h1>
    <form method="get">
        <label>Minimum year:
            <input type="number" name="minYear" value="@value" />
        </label>
        <button type="submit">Filter</button>
    </form>

    <h2>Results</h2>
    @if (Model != null && Model.Any())
    {
        <table border="1" cellpadding="6">
            <thead><tr><th>Year</th><th>Title</th><th>Author</th></tr></thead>
            <tbody>
            @foreach (var b in Model)
            {
                <tr>
                    <td>@b.YearPublished</td>
                    <td>@b.Title</td>
                    <td>@b.AuthorName</td>
                </tr>
            }
            </tbody>
        </table>
    }
    else
    {
        <p>No results.</p>
    }
</body>
</html>